{% extends 'base.html.twig' %}

{% block title %}BackOffice | Gestion du forum
{% endblock %}
{% block content %}

<h1 class="display-3 text-center my-3">BackOffice | Gestion du forum</h1>

<h2 class="display-5 text-center my-5">BackOffice | Gestion des discussions </h2>

    {{ form_start(formDiscu, {'attr': {'class': 'col-md-6 mx-auto'}}) }}

            {{ form_row(formDiscu.titre, {'label': "Nouvelle discussion. Titre : ", 'attr':{'rows':5} }) }}

        <button type="submit" class="btn btn-success">Créer une discussion</button>

{{ form_end(formDiscu) }}
<br>
    {% for label, messages in app.flashes(['danger', 'success', 'warning','info','light','dark', 'primary', 'secondary']) %}

            {% for message in messages %}

            <div class="bg-{{ label }} text-white text-center col-md-4 mx-auto rounded p-3 m-4">
            {{ message }}
            </div>

            {% endfor %}

        {% endfor %}
	

		<table class="table table-striped table-bordered table-dark table-bordered text-center">
			<thead class="thead-inverse">
				<tr>
				{% for data in colonnes %}
					{% if data != 'password' %}
							<th class="bg-info">{{data|upper }}</th>
					{% endif %}
					
				{% endfor %}
							{# <th class="bg-info">PHOTO</th> #}
							<th class="bg-info">EDIT</th>
							<th class="bg-info">SUPPR</th>
							<th class="bg-info">Commentaires associés</th>
				</tr>
			</thead>
			<tbody>
				{% for data in allDiscussion %}
					<tr>
						
							<td class="align-middle">{{ data.id }}</td>
							<td class="align-middle">{{ data.titre }}</td>
							<td class="align-middle">{{ data.date|date('d/m/Y') }}</td>
							

							
							
							{# <td class="align-middle">{{ data.password }}</td> #} 
							<td class="align-middle"><a href="{{ path('admin_edit_discussion', {'id': data.id}) }}"><i class="far fa-edit text-warning"></i></a></td>
							<td class="align-middle"><a onclick="return(confirm('Voulez vous vraiment supprimer cette discussion ?'))" href="{{ path('admin_delete_discussion', {'id': data.id}) }}"><i class="fas fa-trash-alt text-danger"></i></a></td>
							<td class="align-middle"><a href="{{ path('discussion-comment', {'id': data.id}) }}">Voir</a></td>
					</tr>
				{% endfor %}
			</tbody>
		</table>

        <h2 class="display-5 text-center my-5">BackOffice | Gestion des commentaires</h2>

        <table class="table table-striped table-bordered table-dark table-bordered text-center">
			<thead class="thead-inverse">
				<tr>
				{% for data in colonnesCom %}
					{% if data != 'password' %}
							<th class="bg-info">{{data|upper }}</th>
					{% endif %}
					
				{% endfor %}
							{# <th class="bg-info">PHOTO</th> #}
                            <th class="bg-info"> Titre de la discussion</th>
							<th class="bg-info">Auteur</th>
                            <th class="bg-info">id de la discu</th>
							<th class="bg-info">EDIT</th>
							<th class="bg-info">SUPPR</th>
				</tr>
			</thead>
			<tbody>
				{% for data in allComment %}
					<tr>
						
							<td class="align-middle">{{ data.id }}</td>
                            <td class="align-middle">{{ data.commentaires }}</td>
                            <td class="align-middle">{{ data.date|date('d/m/Y') }}</td>
                            <td class="align-middle">{{ data.discussion.titre }}</td>
							<td class="align-middle">{{ data.user.prenom}}</td>
                            <td class="align-middle">{{ data.discussion.id}}</td>
                    
							{# <td class="align-middle">{{ data.password }}</td> #} 

							<td class="align-middle"><a href="{{ path('admin_edit_comments', {'id': data.id}) }}"><i class="far fa-edit text-warning"></i></a></td>
							<td class="align-middle"><a onclick="return(confirm('Voulez vous vraiment supprimer ce commentaire ?'))" href="{{ path('admin_delete_comment', {'id': data.id}) }}"><i class="fas fa-trash-alt text-danger"></i></a></td>
					</tr>
				{% endfor %}
			</tbody>
		</table>



{% endblock %}
